{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome","text":""},{"location":"#introduction","title":"Introduction","text":"<p>Provide a summary/overview of your report, including links to important sections like Objectives and Easter eggs. This is also a good time to highlight and link to some of the awesome things you did like noteworthy hacks or custom scripts you created. Remember to make your report fun and whimsical! </p> <p>The below two admonition blocks explain the 50-page submission limitation and how to navigate the report. Please note that report size and submission guidelines can change, so please make sure to carefully follow any instructions provided by Santa and the elves to ensure you meet the requirements.</p> <p>50-page submission limit</p> <p>Each year there's a huge number of write-ups that need to be reviewed by the Counter Hack team. To find a good middle ground between preventing information overload and creating a write-up that can stand on its own as a learning resource, some parts, like the navigation tip below, are collapsed by default. Skipping over these will not take away from understanding the overall solution, but feel free to expand them to get some additional information.</p> Navigation tip <p>Even with less than 50 pages, there's still quite a bit of information to read through. To make things a little easier, you can use P or , to go to the previous section, N or . to navigate to the next section, and S, F, or / to open up the search dialog.</p> <p>TL;DR if you keep pressing N or . from this point forward, you'll hit all the content in the right order! </p>"},{"location":"#answers","title":"Answers","text":"<p>1. Insert Objective 1 Title - </p> <p>Insert your answer here.</p> <p>2. Insert Objective 2 Title - </p> <p>Insert your answer here.</p> <p>3. Insert Objective 3 Title - </p> <p>Insert your answer here.</p> <p>4. Insert Objective 4 Title - </p> <p>Insert your answer here.</p> <p>5. Insert Objective 5 Title - </p> <p>Insert your answer here.</p>"},{"location":"#conclusion","title":"Conclusion","text":"<p>Narrative</p> <p>In SANS Holiday Hack, a tale unfolds, Each event a narrative, a story it holds. Progress through challenges, see it reveal, A journey of puzzles, with fervent zeal. Complete the game, and then you'll see, The full story unlocked, as it's meant to be. Include it herein, for all to hear, A testament of triumph, year after year.</p> <p></p>"},{"location":"easter_eggs/","title":"Easter Eggs","text":"<p>List all the fun and whimsical Easter Eggs you found!</p>"},{"location":"objectives/o2/","title":"Insert Objective 2 Title","text":"<p>Difficulty:  Direct link: Objective 2 website</p>"},{"location":"objectives/o2/#objective","title":"Objective","text":"<p>Request</p> <p>Insert the objective description from your badge.</p> Insert Elf Name <p>Copy the first part of the conversation with Elf Name here You can use <code>&lt;br/&gt;</code> to ensure each sentence starts on a new line.</p>"},{"location":"objectives/o2/#hints","title":"Hints","text":"Insert Hint 1 Title <p>Along the way you will receive different hints. Insert them here.</p> Insert Hint 2 Title <p>Along the way you will receive different hints. Insert them here.</p>"},{"location":"objectives/o2/#solution","title":"Solution","text":"<p>This section explains the different steps taken to solve the challenge. Try to find a good balance between providing sufficient detail and not overloading the reader with too much information. Use admonitions, images, diagrams, code blocks, and tables to highlight and structure important information or provide additional clarification.</p>"},{"location":"objectives/o2/#admonitions","title":"Admonitions","text":"<p>Anchor the decorations</p> <p>Ensure that all festive decorations, especially electrical ones, are securely anchored. We don\u2019t want them floating off into the tropical sunset!</p> <p>Palm tree lighting</p> <p>While on the island, make sure to hang your Christmas lights on a palm tree. It\u2019s not only festive but also a great beacon for Santa to find you!</p>"},{"location":"objectives/o2/#images","title":"Images","text":""},{"location":"objectives/o2/#diagrams","title":"Diagrams","text":"<pre><code>sequenceDiagram\n  autonumber\n  Santa-&gt;&gt;Elf: Hey Elf, is the Naughty-or-Nice List secured?\n  loop Security Check\n      Elf-&gt;&gt;Elf: Ensuring list is encrypted\n  end\n  Note right of Elf: Using candy-cane encryption!\n  Elf--&gt;&gt;Santa: Safe and sound, Santa!\n  Santa-&gt;&gt;Reindeer: Rudolph, did you patch the sleigh's software?\n  Note left of Reindeer: Checking for reindeerOS updates...\n  Reindeer--&gt;&gt;Santa: All patched and glowing bright!</code></pre>"},{"location":"objectives/o2/#code-blocks","title":"Code blocks","text":"Countdown script (with line 7 highlighted)<pre><code>#!/bin/bash\necho \"Christmas Holiday Countdown\"\n\ndays_until_xmas=$(($(date -d \"Dec 25\" +%j) - $(date +%j)))\n\nif [ $days_until_xmas -ge 0 ]; then\n  echo \"Only $days_until_xmas days until Christmas!\"\nelse\n  echo \"Christmas has passed! Hope you had a great time!\"\nfi\n</code></pre>"},{"location":"objectives/o2/#tables","title":"Tables","text":"Activity Santa's Verdict Elf Comments Iceberg Surfing Risky Business \"Lost three surfboards!\" Polar Bear Hugs Approach with Caution \"Fluffy but... brisk.\" Snow Fort Building Highly Recommended \"Elf-sized doorways only.\" Aurora Light Chasing Magical Experience \"Better than Christmas lights!\" Penguin Parade Absolute Must-See \"They're oddly organized!\" <p>Answer</p> <p>Insert the answer to the objective here.</p>"},{"location":"objectives/o2/#response","title":"Response","text":"<p>Insert Elf Name</p> <p>Copy the final part of the conversation with Elf Name here.</p>"},{"location":"objectives/o3/","title":"Insert Objective 3 Title","text":"<p>Difficulty:  Direct link: Objective 3 terminal</p>"},{"location":"objectives/o3/#objective","title":"Objective","text":"<p>Request</p> <p>Insert the objective description from your badge.</p> Insert Elf Name <p>Copy the first part of the conversation with Elf Name here You can use <code>&lt;br/&gt;</code> to ensure each sentence starts on a new line.</p>"},{"location":"objectives/o3/#hints","title":"Hints","text":"Insert Hint 1 Title <p>Along the way you will receive different hints. Insert them here.</p> Insert Hint 2 Title <p>Along the way you will receive different hints. Insert them here.</p>"},{"location":"objectives/o3/#solution","title":"Solution","text":"<p>This section explains the different steps taken to solve the challenge. Try to find a good balance between providing sufficient detail and not overloading the reader with too much information. Use admonitions, images, diagrams, code blocks, and tables to highlight and structure important information or provide additional clarification.</p>"},{"location":"objectives/o3/#admonitions","title":"Admonitions","text":"<p>Anchor the decorations</p> <p>Ensure that all festive decorations, especially electrical ones, are securely anchored. We don\u2019t want them floating off into the tropical sunset!</p> <p>Palm tree lighting</p> <p>While on the island, make sure to hang your Christmas lights on a palm tree. It\u2019s not only festive but also a great beacon for Santa to find you!</p>"},{"location":"objectives/o3/#images","title":"Images","text":""},{"location":"objectives/o3/#diagrams","title":"Diagrams","text":"<pre><code>sequenceDiagram\n  autonumber\n  Santa-&gt;&gt;Elf: Hey Elf, is the Naughty-or-Nice List secured?\n  loop Security Check\n      Elf-&gt;&gt;Elf: Ensuring list is encrypted\n  end\n  Note right of Elf: Using candy-cane encryption!\n  Elf--&gt;&gt;Santa: Safe and sound, Santa!\n  Santa-&gt;&gt;Reindeer: Rudolph, did you patch the sleigh's software?\n  Note left of Reindeer: Checking for reindeerOS updates...\n  Reindeer--&gt;&gt;Santa: All patched and glowing bright!</code></pre>"},{"location":"objectives/o3/#code-blocks","title":"Code blocks","text":"Countdown script (with line 7 highlighted)<pre><code>#!/bin/bash\necho \"Christmas Holiday Countdown\"\n\ndays_until_xmas=$(($(date -d \"Dec 25\" +%j) - $(date +%j)))\n\nif [ $days_until_xmas -ge 0 ]; then\n  echo \"Only $days_until_xmas days until Christmas!\"\nelse\n  echo \"Christmas has passed! Hope you had a great time!\"\nfi\n</code></pre>"},{"location":"objectives/o3/#tables","title":"Tables","text":"Activity Santa's Verdict Elf Comments Iceberg Surfing Risky Business \"Lost three surfboards!\" Polar Bear Hugs Approach with Caution \"Fluffy but... brisk.\" Snow Fort Building Highly Recommended \"Elf-sized doorways only.\" Aurora Light Chasing Magical Experience \"Better than Christmas lights!\" Penguin Parade Absolute Must-See \"They're oddly organized!\" <p>Answer</p> <p>Insert the answer to the objective here.</p>"},{"location":"objectives/o3/#response","title":"Response","text":"<p>Insert Elf Name</p> <p>Copy the final part of the conversation with Elf Name here.</p>"},{"location":"objectives/o4/","title":"Insert Objective 4 Title","text":"<p>Difficulty:  Direct link: Objective 4 website</p>"},{"location":"objectives/o4/#objective","title":"Objective","text":"<p>Request</p> <p>Insert the objective description from your badge.</p> Insert Elf Name <p>Copy the first part of the conversation with Elf Name here You can use <code>&lt;br/&gt;</code> to ensure each sentence starts on a new line.</p>"},{"location":"objectives/o4/#hints","title":"Hints","text":"Insert Hint 1 Title <p>Along the way you will receive different hints. Insert them here.</p> Insert Hint 2 Title <p>Along the way you will receive different hints. Insert them here.</p>"},{"location":"objectives/o4/#solution","title":"Solution","text":"<p>This section explains the different steps taken to solve the challenge. Try to find a good balance between providing sufficient detail and not overloading the reader with too much information. Use admonitions, images, diagrams, code blocks, and tables to highlight and structure important information or provide additional clarification.</p>"},{"location":"objectives/o4/#admonitions","title":"Admonitions","text":"<p>Anchor the decorations</p> <p>Ensure that all festive decorations, especially electrical ones, are securely anchored. We don\u2019t want them floating off into the tropical sunset!</p> <p>Palm tree lighting</p> <p>While on the island, make sure to hang your Christmas lights on a palm tree. It\u2019s not only festive but also a great beacon for Santa to find you!</p>"},{"location":"objectives/o4/#images","title":"Images","text":""},{"location":"objectives/o4/#diagrams","title":"Diagrams","text":"<pre><code>sequenceDiagram\n  autonumber\n  Santa-&gt;&gt;Elf: Hey Elf, is the Naughty-or-Nice List secured?\n  loop Security Check\n      Elf-&gt;&gt;Elf: Ensuring list is encrypted\n  end\n  Note right of Elf: Using candy-cane encryption!\n  Elf--&gt;&gt;Santa: Safe and sound, Santa!\n  Santa-&gt;&gt;Reindeer: Rudolph, did you patch the sleigh's software?\n  Note left of Reindeer: Checking for reindeerOS updates...\n  Reindeer--&gt;&gt;Santa: All patched and glowing bright!</code></pre>"},{"location":"objectives/o4/#code-blocks","title":"Code blocks","text":"Countdown script (with line 7 highlighted)<pre><code>#!/bin/bash\necho \"Christmas Holiday Countdown\"\n\ndays_until_xmas=$(($(date -d \"Dec 25\" +%j) - $(date +%j)))\n\nif [ $days_until_xmas -ge 0 ]; then\n  echo \"Only $days_until_xmas days until Christmas!\"\nelse\n  echo \"Christmas has passed! Hope you had a great time!\"\nfi\n</code></pre>"},{"location":"objectives/o4/#tables","title":"Tables","text":"Activity Santa's Verdict Elf Comments Iceberg Surfing Risky Business \"Lost three surfboards!\" Polar Bear Hugs Approach with Caution \"Fluffy but... brisk.\" Snow Fort Building Highly Recommended \"Elf-sized doorways only.\" Aurora Light Chasing Magical Experience \"Better than Christmas lights!\" Penguin Parade Absolute Must-See \"They're oddly organized!\" <p>Answer</p> <p>Insert the answer to the objective here.</p>"},{"location":"objectives/o4/#response","title":"Response","text":"<p>Insert Elf Name</p> <p>Copy the final part of the conversation with Elf Name here.</p>"},{"location":"objectives/o5/","title":"Insert Objective 5 Title","text":"<p>Difficulty:  Direct link: Objective5.zip</p>"},{"location":"objectives/o5/#objective","title":"Objective","text":"<p>Request</p> <p>Insert the objective description from your badge.</p> Insert Elf Name <p>Copy the first part of the conversation with Elf Name here You can use <code>&lt;br/&gt;</code> to ensure each sentence starts on a new line.</p>"},{"location":"objectives/o5/#hints","title":"Hints","text":"Insert Hint 1 Title <p>Along the way you will receive different hints. Insert them here.</p> Insert Hint 2 Title <p>Along the way you will receive different hints. Insert them here.</p>"},{"location":"objectives/o5/#solution","title":"Solution","text":"<p>This section explains the different steps taken to solve the challenge. Try to find a good balance between providing sufficient detail and not overloading the reader with too much information. Use admonitions, images, diagrams, code blocks, and tables to highlight and structure important information or provide additional clarification.</p>"},{"location":"objectives/o5/#admonitions","title":"Admonitions","text":"<p>Anchor the decorations</p> <p>Ensure that all festive decorations, especially electrical ones, are securely anchored. We don\u2019t want them floating off into the tropical sunset!</p> <p>Palm tree lighting</p> <p>While on the island, make sure to hang your Christmas lights on a palm tree. It\u2019s not only festive but also a great beacon for Santa to find you!</p>"},{"location":"objectives/o5/#images","title":"Images","text":""},{"location":"objectives/o5/#diagrams","title":"Diagrams","text":"<pre><code>sequenceDiagram\n  autonumber\n  Santa-&gt;&gt;Elf: Hey Elf, is the Naughty-or-Nice List secured?\n  loop Security Check\n      Elf-&gt;&gt;Elf: Ensuring list is encrypted\n  end\n  Note right of Elf: Using candy-cane encryption!\n  Elf--&gt;&gt;Santa: Safe and sound, Santa!\n  Santa-&gt;&gt;Reindeer: Rudolph, did you patch the sleigh's software?\n  Note left of Reindeer: Checking for reindeerOS updates...\n  Reindeer--&gt;&gt;Santa: All patched and glowing bright!</code></pre>"},{"location":"objectives/o5/#code-blocks","title":"Code blocks","text":"Countdown script (with line 7 highlighted)<pre><code>#!/bin/bash\necho \"Christmas Holiday Countdown\"\n\ndays_until_xmas=$(($(date -d \"Dec 25\" +%j) - $(date +%j)))\n\nif [ $days_until_xmas -ge 0 ]; then\n  echo \"Only $days_until_xmas days until Christmas!\"\nelse\n  echo \"Christmas has passed! Hope you had a great time!\"\nfi\n</code></pre>"},{"location":"objectives/o5/#tables","title":"Tables","text":"Activity Santa's Verdict Elf Comments Iceberg Surfing Risky Business \"Lost three surfboards!\" Polar Bear Hugs Approach with Caution \"Fluffy but... brisk.\" Snow Fort Building Highly Recommended \"Elf-sized doorways only.\" Aurora Light Chasing Magical Experience \"Better than Christmas lights!\" Penguin Parade Absolute Must-See \"They're oddly organized!\" <p>Answer</p> <p>Insert the answer to the objective here.</p>"},{"location":"objectives/o5/#response","title":"Response","text":"<p>Insert Elf Name</p> <p>Copy the final part of the conversation with Elf Name here.</p>"},{"location":"objectives/spi/","title":"SPI [Serial Peripheral Interface]","text":""},{"location":"objectives/spi/#what-is-spi","title":"What is SPI","text":"<p>SPI stands for Serial Peripheral Interface. It's essentially a synchronous serial communication protocol that's used for short-distance communication, typically between a microcontroller (like a Raspberry Pi or an Arduino) and one or more peripheral devices like sensors, SD cards, or other modules. So that's the basic idea!</p>"},{"location":"objectives/spi/#where-is-it-used-now","title":"Where is it used now?","text":"<p>SPI is used behind the scenes in a lot of common electronics. For instance, if you've got a device with an SD card reader-like a camera or even some smartphones - that SD card reader is probably using SPI to communicate with the main processor.  Touchscreens in appliances - like a smart fridge panel or a fancy thermostat screen - which often rely on SPI to send data quickly between the controller and the display.</p>"},{"location":"objectives/spi/#spi-architecture","title":"SPI Architecture","text":"<p>This consists of devices (Master and Secondary) and the signals used between the devices.</p>"},{"location":"objectives/spi/#devices","title":"Devices","text":"<ol> <li>Master Device : This controls the communication and provides the clock signal(more on this in the signal section below).  e.g. A Raspberry Pi or Arduino.</li> <li>Secondary Device : These are the peripheral devices e.g. SD card, Display.</li> </ol>"},{"location":"objectives/spi/#signals","title":"Signals","text":"<ol> <li>SCK (Serial Clock Line) : Generated by the master device. Every time there is clock pulse, there is data transfer on MOSI/MISO line.</li> <li>MOSI (Master Out Secondary In) :  The line that carries data from the master to the secondary device.</li> <li>MISO (Master In Secondary Out) :  The line that carries data from the secondary device back to the master.</li> <li>SS (Secondary Select) :  The line that is used to select which secondary device you are currently talking to if you have more than one.</li> </ol>"},{"location":"objectives/spi/#flow","title":"Flow","text":"<ol> <li> <p>Select the device (SS) The master pulls the SS line low to select the device it wants to communicate with.</p> </li> <li> <p>Set the timing (Clock) The master generates clock pulses that control when data is transferred.</p> </li> <li> <p>Transfer the data (MOSI / MISO) Data is exchanged one bit per clock pulse, with the master sending data on MOSI and the device optionally responding on MISO.</p> </li> <li> <p>End the communication The clock stops and SS is pulled high, ending the transaction.</p> </li> </ol> <pre><code>flowchart TB\n\n%% \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Control \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nsubgraph Control[\"Control / Device Selection (SS)\"]\ndirection TB\nA[Master decides to communicate]\nB[SS pulled LOW&lt;br/&gt;Device selected]\nend\n\n%% \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Timing \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nsubgraph Timing[\"Timing (Clock / SCK)\"]\ndirection TB\nC[Clock starts toggling]\nD[Clock pulses define bit timing]\nend\n\n%% \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Data \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nsubgraph Data[\"Data Transfer (MOSI / MISO)\"]\ndirection TB\nE[Master places bit on MOSI]\nF[Clock edge occurs]\nG[Device samples bit]\nH{More bits?}\nend\n\n%% \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 End \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nsubgraph End[\"End of Transaction\"]\ndirection TB\nI[Clock stops]\nJ[SS pulled HIGH&lt;br/&gt;Device deselected]\nend\n\n%% \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Flow \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nA --&gt; B --&gt; C --&gt; D --&gt; E --&gt; F --&gt; G --&gt; H\nH --&gt;|Yes| E\nH --&gt;|No| I --&gt; J</code></pre>"},{"location":"objectives/spi/#the-setup","title":"The setup","text":"<ol> <li>Wiring</li> <li>Setting up the Raspberry Pi for SPI</li> <li>Testing without an actual MicroSD card</li> <li>Testing with an actual MicroSD card</li> </ol>"},{"location":"objectives/spi/#wiring","title":"Wiring","text":"<p>The time for action!  I used :</p> <ol> <li>Raspberry PI 2 Model B V 1.1 as master.</li> <li>MicroSD card adapter as secondary device.</li> <li>MicroSD card</li> <li>Jumper wires (female to female)</li> </ol>"},{"location":"objectives/spi/#raspberry-pi","title":"Raspberry Pi","text":"<p>One of the most important section in the Pi are the pins. </p> Raspberry Pi Pins in the Raspberry Pi Raspberry Pi pins INSIDE(Odd Pins) Purpose OUTSIDE(Even Pins) Purpose Pin 1 3.3V Power Pin 2 5V Power Pin 3 GPIO2 / I\u00b2C SDA1 Pin 4 5V Power Pin 5 GPIO3 / I\u00b2C SCL1 Pin 6 GND Pin 7 GPIO4 Pin 8 GPIO14 / UART TXD Pin 9 GND Pin 10 GPIO15 / UART RXD Pin 11 GPIO17 Pin 12 GPIO18 / PWM0 Pin 13 GPIO27 Pin 14 GND Pin 15 GPIO22 Pin 16 GPIO23 Pin 17 3.3V Power Pin 18 GPIO24 Pin 19 GPIO10 / SPI MOSI Pin 20 GND Pin 21 GPIO9 / SPI MISO Pin 22 GPIO25 Pin 23 GPIO11 / SPI SCLK Pin 24 GPIO8 / SPI CS0 Pin 25 GND Pin 26 GPIO7 / SPI CS1 Pin 27 GPIO0 / ID_SD Pin 28 GPIO1 / ID_SC Pin 29 GPIO5 Pin 30 GND Pin 31 GPIO6 Pin 32 GPIO12 / PWM0 Pin 33 GPIO13 / PWM1 Pin 34 GND Pin 35 GPIO19 / PCM FS Pin 36 GPIO16 Pin 37 GPIO26 Pin 38 GPIO20 / PCM DIN Pin 39 GND Pin 40 GPIO21 / PCM DOUT"},{"location":"objectives/spi/#microsd-card-adapter-module","title":"MicroSD card adapter module","text":"<p>Front and back side of the adapter module showing the CS, MOSI, MISO and SCK pins. The additional VCC (Voltage at the Common Collector) pin is to supply power from the 3.3V of Raspberry pi.</p> Front side Back side"},{"location":"objectives/spi/#jumper-wires","title":"Jumper wires","text":"<p>In this case we need female to female wires connecting the Raspberry Pi and MicroSD card module pins.  </p>"},{"location":"objectives/spi/#the-wiring","title":"The wiring","text":"<p>3.3V Pin from Raspberry Pi to VCC pin on the MicroSD module.   MISO/Pin 21 from Raspberry Pi to MISO pin on the MicroSD module.   MOSI/Pin 19 from Raspberry Pi to MOSI pin on the MicroSD module.   SCK(Clock pin)/Pin 23 from Raspberry Pi to SCK pin on the MicroSD module.   CS/SS(Chip Select/Secondary Select pin)/Pin 24 from Raspberry Pi to CS pin on the MicroSD module.   Ground/Pin 6 from Raspberry Pi to GND pin on the MicroSD module.  </p>"},{"location":"objectives/spi/#setting-up-the-raspberry-pi-for-spi-communication","title":"Setting up the Raspberry Pi for SPI communication","text":""},{"location":"objectives/spi/#enable-the-spi","title":"Enable the SPI","text":"<p>Connect to the Raspberry pi and open the Raspberry Pi config.  <pre><code>sudo raspi-config\n</code></pre> </p> <p> Go to \"System Options\" and select \"SPI - Enable/disable automatic loading of SPI kernel module\".</p> System options Enable SPI <p> Reboot the Pi.  <pre><code>reboot\n</code></pre></p> <p>SPI is now enabled.  </p> <p>We confirm by looking at the modules available on the Pi filesystem.</p> <p>We can confirm and check if the kernel modules related to the SPI are loaded. <pre><code>lsmod | grep spi\n</code></pre> </p> <ol> <li>spi_bcm2835 is the SPI driver specific to the Broadcom chip in the Raspberry Pi. This tells us the hardware SPI interface is active.</li> <li>spidev is the module that creates the /dev/spidev0.0 and /dev/spidev0.1 device files that user programs can interact with.</li> </ol> <p>Below are the interfaces which our Python program (details later below) can open and talk to.  <pre><code>ls /dev/spidev*\n</code></pre> </p> <p>To be absolutely sure, verify that SPI is enabled in the boot configuration  <pre><code>cat /boot/config.txt\n</code></pre> </p>"},{"location":"objectives/spi/#test","title":"Test","text":"<p>We now test with a python program If the python can talk to the SPI interfaces.  For this we first install the module <code>python3-spidev</code>. <pre><code>sudo apt update\nsudo apt install python3-spidev\n</code></pre> We now use the below script to connect to the SPI interface.  <code>spi.open(0, 0)</code> is using <code>spi.open(BUS, CHIP_SELECT)</code>  The BUS is the combination of one clock wire (CLK), one send wire (MOSI) and one receive wire (MISO) - we just wired them up between Pi and MicroSD module The CHIP_SELECT is the device which is connected to the Pi - in out case the MicroSD module. 0 for both of then just means the number, like index 0 - both of them being the first and only ones.</p> <p><code>spi.max_speed_hz = 400000</code>  Its very important to understand what this means.  400,000 Hz means 400,000 clock pulses per second.  1 clock pulse = 1 bit transferred  So roughly, 400,000 bits per second. \"+When you talk over SPI, do NOT toggle the clock faster than 400,000 times per second.\"</p> <pre><code>import spidev\n\nspi = spidev.SpiDev()\nspi.open(0, 0)      \nspi.max_speed_hz = 400000\nspi.mode = 0\n\nprint(\"SPI opened successfully\")\n</code></pre>"},{"location":"objectives/spi/#sending-and-receiving-data-over-spi","title":"Sending and Receiving Data over SPI","text":"<p>At this point, the SPI bus is configured and accessible from Python. The next step is to understand how data is transferred over SPI using the <code>xfer2()</code> method.</p> <pre><code>import spidev\n\nspi = spidev.SpiDev()\nspi.open(0, 0)\nspi.max_speed_hz = 400000\nspi.mode = 0\n\nresponse = spi.xfer2([0xFF])\nprint(response)\n\nspi.close()\n</code></pre>"},{"location":"objectives/spi/#cmd0-command","title":"CMD0 command","text":"<pre><code>import spidev\nimport RPi.GPIO as GPIO\nimport time\n\n# Set the pin numbering mode to BOARD for physical pin numbering\nGPIO.setmode(GPIO.BOARD)\n\n# Use physical pin number 24 for the Chip Select (CS) line\nCS_PIN = 24\nGPIO.setup(CS_PIN, GPIO.OUT)\n\n# Open the SPI bus\nspi = spidev.SpiDev()\nspi.open(0, 0)  # Bus 0, Device 0\n\n# Set SPI mode and speed\nspi.mode = 0\nspi.max_speed_hz = 400000\nspi.no_cs = True  # We\u2019ll handle CS manually\n\n# Step 1: Ensure the SD card is not selected\nGPIO.output(CS_PIN, GPIO.HIGH)\n\n# Send 80 clock pulses (10 bytes of 0xFF)\nspi.xfer2([0xFF] * 10)\ntime.sleep(0.01)\n\n# Step 2: Select the SD card by pulling CS low\nGPIO.output(CS_PIN, GPIO.LOW)\n\n# Send CMD0 to reset the SD card\n# CMD0 = [0x40, 0, 0, 0, 0, 0x95] (0x95 is the CRC for CMD0)\ncmd0 = [0x40, 0, 0, 0, 0, 0x95]\nspi.xfer2(cmd0)\n\n# Step 3: Wait for response from the SD card\nresponse = 0xFF\nfor _ in range(20):\n    response = spi.xfer2([0xFF])[0]\n    if response != 0xFF:\n        break\n\n# Deselect the SD card by pulling CS high\nGPIO.output(CS_PIN, GPIO.HIGH)\n\n# Print the response from the SD card\nprint(\"Response:\", hex(response))\n\n# Clean up\nspi.close()\nGPIO.cleanup()\n</code></pre>"},{"location":"objectives/spi/#cmd8-command","title":"CMD8 command","text":"<p> Let\u2019s focus on the simplest command after CMD0, which is the CMD8 command. What CMD8 Does: Purpose: CMD8 is used to check the voltage range and the card\u2019s version. What it sends: It sends a command that includes a requested voltage range and a pattern that the card should echo back. Expected Response: If the card is modern and supports the requested voltage, it will echo back the pattern correctly, confirming compatibility. The Simplest Program for CMD8:</p> <pre><code>import spidev\nimport RPi.GPIO as GPIO\nimport time\n\n# Set the pin numbering mode to BOARD for physical pin numbering\nGPIO.setmode(GPIO.BOARD)\n\n# Use physical pin number 24 for the Chip Select (CS) line\nCS_PIN = 24\nGPIO.setup(CS_PIN, GPIO.OUT)\n\n# Open the SPI bus\nspi = spidev.SpiDev()\nspi.open(0, 0)  # Bus 0, Device 0\n\n# Set SPI mode and speed\nspi.mode = 0\nspi.max_speed_hz = 400000\nspi.no_cs = True  # We\u2019ll handle CS manually\n\n# Step 1: Ensure the SD card is not selected\nGPIO.output(CS_PIN, GPIO.HIGH)\n\n# Send 80 clock pulses (10 bytes of 0xFF)\nspi.xfer2([0xFF] * 10)\ntime.sleep(0.01)\n\n# Step 2: Select the SD card by pulling CS low\nGPIO.output(CS_PIN, GPIO.LOW)\n\n# Send CMD8 to check voltage and card compatibility\n# CMD8 = [0x48, 0x00, 0x00, 0x01, 0xAA]\ncmd8 = [0x48, 0x00, 0x00, 0x01, 0xAA]\nspi.xfer2(cmd8)\n\n# Step 3: Wait for the response from the SD card\nresponse = []\nfor _ in range(8):\n    response.append(spi.xfer2([0xFF])[0])\n\n# Deselect the SD card by pulling CS high\nGPIO.output(CS_PIN, GPIO.HIGH)\n\n# Print the response from the SD card\nprint(\"Response:\", response)\n\n# Clean up\nspi.close()\nGPIO.cleanup()\n</code></pre>"},{"location":"objectives/spi/#simplest-acmd41-loop-board-mode-minimal-logging","title":"Simplest ACMD41 loop (BOARD mode, minimal logging)","text":"<pre><code>import spidev\nimport RPi.GPIO as GPIO\nimport time\n\n# ---------- GPIO SETUP ----------\nGPIO.setmode(GPIO.BOARD)\n\nCS_PIN = 24  # Physical pin 24 (CE0)\nGPIO.setup(CS_PIN, GPIO.OUT, initial=GPIO.HIGH)\n\n# ---------- SPI SETUP ----------\nspi = spidev.SpiDev()\nspi.open(0, 0)\n\nspi.mode = 0\nspi.max_speed_hz = 400000\nspi.no_cs = True  # we control CS manually\n\n# ---------- HELPER FUNCTIONS ----------\ndef cs_low():\n    GPIO.output(CS_PIN, GPIO.LOW)\n\ndef cs_high():\n    GPIO.output(CS_PIN, GPIO.HIGH)\n\ndef send_cmd(cmd, arg, crc):\n    \"\"\"\n    Send an SD command and return the R1 response.\n    \"\"\"\n    packet = [\n        0x40 | cmd,\n        (arg &gt;&gt; 24) &amp; 0xFF,\n        (arg &gt;&gt; 16) &amp; 0xFF,\n        (arg &gt;&gt; 8) &amp; 0xFF,\n        arg &amp; 0xFF,\n        crc\n    ]\n\n    spi.xfer2(packet)\n\n    # Read until we get a real response (not 0xFF)\n    for _ in range(20):\n        r = spi.xfer2([0xFF])[0]\n        if r != 0xFF:\n            return r\n\n    return 0xFF  # timeout\n\n# ---------- ASSUME CMD0 ALREADY DONE ----------\nprint(\"Starting ACMD41 initialization loop...\\n\")\n\nfor attempt in range(1, 51):\n\n    cs_low()\n\n    r1_cmd55 = send_cmd(55, 0x00000000, 0x65)\n    print(f\"Attempt {attempt}: CMD55  -&gt; R1 = 0x{r1_cmd55:02X}\")\n\n    r1_acmd41 = send_cmd(41, 0x00000000, 0x77)\n    print(f\"Attempt {attempt}: ACMD41 -&gt; R1 = 0x{r1_acmd41:02X}\")\n\n    cs_high()\n\n    if r1_acmd41 == 0x00:\n        print(\"\\n\u2705 SD card is READY (initialization complete)\")\n        break\n\n    time.sleep(0.1)\n\nelse:\n    print(\"\\n\u274c SD card did not become ready\")\n\n# ---------- CLEANUP ----------\nspi.close()\nGPIO.cleanup()\n</code></pre>"}]}